<!-- src/app/component/hotel/hotel-component/hotel-component.component.html -->
<div class="hotel-search-container">
  <div class="search-header">
    <h1>üè® Search Hotels</h1>
    <p>Find your perfect accommodation at the best prices</p>
  </div>

  <!-- Search Form -->
  <div class="search-card">
    <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
      
      <div class="form-row">
        <div class="form-group full-width">
          <label for="destination">Destination</label>
          <input 
            type="text" 
            id="destination"
            formControlName="destination" 
            placeholder="Enter city or hotel name"
            class="form-control"
            [class.error]="hasError('destination', 'required')">
          @if (hasError('destination', 'required')) {
            <span class="error-message">Destination is required</span>
          }
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="checkInDate">Check-in Date</label>
          <input 
            type="date" 
            id="checkInDate"
            formControlName="checkInDate"
            [min]="minDate"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="checkOutDate">Check-out Date</label>
          <input 
            type="date" 
            id="checkOutDate"
            formControlName="checkOutDate"
            [min]="searchForm.get('checkInDate')?.value || minDate"
            class="form-control">
        </div>

        @if (calculateNights() > 0) {
          <div class="nights-badge">
            {{ calculateNights() }} night(s)
          </div>
        }
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="guests">Guests</label>
          <input 
            type="number" 
            id="guests"
            formControlName="guests"
            min="1"
            max="10"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="rooms">Rooms</label>
          <input 
            type="number" 
            id="rooms"
            formControlName="rooms"
            min="1"
            max="5"
            class="form-control">
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="search-button" [disabled]="searchForm.invalid">
          üîç Search Hotels
        </button>
        <button type="button" class="reset-button" (click)="onReset()">
          üîÑ Reset / Show All
        </button>
        <button type="button" class="back-button" routerLink="/home">
          ‚Üê Back to Home
        </button>
      </div>
    </form>
  </div>

  <!-- Quick Search Input -->
  <div class="quick-search-section">

  <div class="search-wrapper">

    <!-- Magnifier -->
    <span class="search-icon">üîç</span>

    <!-- Input -->
    <input
      type="text"
      [(ngModel)]="searchQuery"
      (input)="onSearchQueryChange()"
      placeholder="Quick search by hotel name, city, or location..."
      class="expand-input"
    />

    <!-- Clear -->
    @if (searchQuery) {
      <button class="clear-btn" (click)="clearSearch()">‚úï</button>
    }

  </div>

  <!-- Hint -->
  @if (searchQuery) {
    <p class="search-hint">
      Searching for: "<strong>{{ searchQuery }}</strong>"
    </p>
  }

</div>


  <!-- Results Section -->
  <div class="results-section">
    <div class="results-header">
      <h2>
        @if (filteredHotels.length === allHotels.length) {
          All Available Hotels ({{ filteredHotels.length }})
        } @else {
          Search Results ({{ filteredHotels.length }})
        }
      </h2>
    </div>

    @if (loading) {
      <div class="loading">
        <div class="spinner"></div>
        <p>Loading hotels...</p>
      </div>
    }

    @if (!loading && filteredHotels.length === 0) {
      <div class="no-results">
        <h3>No hotels found</h3>
        <p>Try different search criteria or click Reset</p>
        <button class="btn-primary" (click)="onReset()">Show All Hotels</button>
      </div>
    }

    @if (!loading && filteredHotels.length > 0) {
      <div class="hotels-grid">
        @for (hotel of filteredHotels; track hotel.id) {
          <div class="hotel-card" (click)="selectHotel(hotel)">
            <button 
              class="fav-btn"
              [class.active]="isFavorite(hotel)"
              (click)="toggleFavorite(hotel, $event)">
              {{ isFavorite(hotel) ? '‚ù§Ô∏è' : 'ü§ç' }}
            </button>

            <div class="hotel-image">
              @if (hotel.freeCancellation) {
                <span class="free-cancel-badge">Free Cancellation</span>
              }
            </div>

            <div class="hotel-info">
              <div class="hotel-header">
                <div>
                  <h3>{{ hotel.name }}</h3>
                  <div class="location">
                    <span class="icon">üìç</span>
                    <span>{{ hotel.location }}, {{ hotel.city }}</span>
                  </div>
                </div>
                
                <div class="rating-section">
                  <div class="stars">
                    @for (star of getStarArray(hotel.rating); track $index) {
                      <span class="star filled">‚≠ê</span>
                    }
                    @for (star of getEmptyStarArray(hotel.rating); track $index) {
                      <span class="star empty">‚òÜ</span>
                    }
                  </div>
                  <div class="review-score">
                    <span class="score">{{ hotel.reviewScore }}/10</span>
                    <span class="review-count">({{ hotel.reviewCount }} reviews)</span>
                  </div>
                </div>
              </div>

              <div class="amenities">
                @for (amenity of hotel.amenities.slice(0, 4); track amenity) {
                  <span class="amenity-badge">{{ amenity }}</span>
                }
                @if (hotel.amenities.length > 4) {
                  <span class="amenity-badge more">+{{ hotel.amenities.length - 4 }} more</span>
                }
              </div>

              <div class="pricing">
                <div class="price-info">
                  <div class="price-per-night">
                    <span class="amount">{{ formatPrice(hotel.pricePerNight) }}</span>
                    <span class="per-text">per night</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>